{% extends "../components/base.html" %}
{% load custom_tags %}
{% load static %}

{% block content %}
	<section>
		{% if headshot_url %}
			<img src="{{ headshot_url }}" alt="legislator headshot" />
		{% else %}
			<img src="{% static "public/img/placeholder-headshot.png" %}" alt="placeholder headshot" />
		{% endif %}
		<h2>{{ name }}</h2>
		<span>{{ party }} · {{ title }} · District {{ district }}</span>

		<div style="width:250px;height:250px" data-hook="legislator-map" data-value="{{ division_id }}"></div>

		{% if email or capitol_address or capitol_phone or district_address or district_phone %}
			<address>
				<dl>
					{% if email %}<dt>Email</dt><dd>{{ email|urlize }}</dd>{% endif %}

					{% if capitol_address %}<dt>Capitol Address</dt><dd>{{ capitol_address|linebreaks }}</dd>{% endif %}
					{% if capitol_phone %}<dt>Capitol Phone</dt><dd><a href="tel:{{ capitol_phone }}">{{ capitol_phone }}</a></dd>{% endif %}

					{% if district_address %}<dt>District Address</dt><dd>{{ district_address|linebreaks }}</dd>{% endif %}
					{% if district_phone %}<dt>District Phone</dt><dd><a href="tel:{{ district_phone }}">{{ district_phone }}</a></dd>{% endif %}
				</dl>
			</address>
		{% endif %}

		{% if committee_memberships %}
			<h1>Committee Memberships</h1>
			{% for committee in committee_memberships %}
				<button>{{ committee }}</button>
			{% endfor %}
		{% endif %}
	</section>

	<section>
		<h1>Sponsored Bills</h1>
		{% for bill in sponsored_bills %}
			<div>
				<h2>{{ bill.identifier }}</h2>
				<span>{{ bill.title }}</span>
			</div>
		{% endfor %}
		{% if sponsored_bills %}<button>View more bills</button>{% endif %}
	</section>

	<section>
		<h1>Recent Votes</h1>
		{% for start_date, vote_events in votes.items %}
			<span>{{ start_date }}</span>
			{% for vote_event in vote_events %}
				{% vote_card vote_event %}
			{% endfor %}
		{% endfor %}
	</section>

	{% sources state sources %}
{% endblock %}
